<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Airwaybill</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" />
</head>

<body>
	<div class="ui container">
		<div id="tag" class="ui top right attached label"></div>
		<div class="ui grid">
			<div class="twelve wide column">
			<h1 class="ui header company"></h1>
			<form class="ui form">
			<div class="ui segment">
				<h4 class="ui dividing header">Shipper Information</h4>
				<div class="two fields">
					<div class="field">
						<label>Account</label>
						<input type="text" placeholder="Account Number" id="ship_account" data-bind="ship_account">
					</div>
					<div class="field">
						<label>Reference</label>
						<input type="text" placeholder="Reference" id="ship_reference" data-bind="ship_reference">
					</div>
				</div>
				<div class="two fields">
					<div class="field">
						<label>Name</label>
						<input type="text" placeholder="Shipper Name" id="ship_name" data-bind="ship_name">
					</div>
					<div class="field">
						<label>Company</label>
						<input type="text" placeholder="Company Name" id="ship_company_name" data-bind="ship_company_name">
					</div>
				</div>
				<div class="field">
						<label>Address</label>
					<input type="text" placeholder="Shipper Address" id="ship_address" data-bind="ship_address">
				</div>
				<div class="three fields">
					<div class="field">
						<label>City</label>
						<input type="text" placeholder="Shipper City" id="ship_city" data-bind="ship_city">
					</div>
					<div class="field">
						<label>State</label>
						<input type="text" placeholder="Company State" id="ship_state" data-bind="ship_state">
					</div>
					<div class="field">
						<label>Postal Code</label>
						<input type="text" placeholder="Postal Code" id="ship_zip" data-bind="ship_zip">
					</div>
				</div>
				<div class="two fields">
					<div class="field">
						<label>Country Code</label>
						<div class="ui fluid search selection dropdown country_search" binds="ship_country_name">
							<input type="hidden" name="ship_country" id="ship_country" data-bind="ship_country">
							<i class="dropdown icon"></i>
							<div class="default text">Select Country</div>
							<div class="menu"></div>
						</div>
					</div>
					<div class="field">
						<label>Phone</label>
						<input type="text" placeholder="Shipper Telephone" id="ship_phone" data-bind="ship_phone">
					</div>
				</div>
			</div>

			<div class="ui segment">
				<h4 class="ui dividing header">Consignee Information</h4>
				<div class="two fields">
					<div class="field">
						<label>Name</label>
						<input type="text" placeholder="Consignee Name" id="con_name" data-bind="con_name">
					</div>
					<div class="field">
						<label>Company</label>
						<input type="text" placeholder="Company Name" id="con_company_name" data-bind="con_company_name">
					</div>
				</div>
				<div class="field">
						<label>Address</label>
					<input type="text" placeholder="Consignee Address" id="con_address" data-bind="con_address">
				</div>
				<div class="three fields">
					<div class="field">
						<label>City</label>
						<input type="text" placeholder="Consignee City" id="con_city" data-bind="con_city">
					</div>
					<div class="field">
						<label>State</label>
						<input type="text" placeholder="Consignee State" id="con_state" data-bind="con_state">
					</div>
					<div class="field">
						<label>Postal Code</label>
						<input type="text" placeholder="Consignee Code" id="con_zip" data-bind="con_zip">
					</div>
				</div>
				<div class="two fields">
					<div class="field">
						<label>Country Code</label>
						<div class="ui fluid search selection dropdown country_search" binds="con_country_name">
							<input type="hidden" name="con_country" id="con_country" data-bind="con_country">
							<i class="dropdown icon"></i>
							<div class="default text">Select Country</div>
							<div class="menu"></div>
						</div>
					</div>
					<div class="field">
						<label>Phone</label>
						<input type="text" placeholder="Consignee Telephone" id="con_phone" data-bind="con_phone">
					</div>
				</div>
			</div>

			<div class="ui segment">
				<h4 class="ui dividing header">Shipment Information</h4>
				<div class="field">
					<label>Description</label>
					<input type="text" placeholder="Description" id="description" data-bind="description">
				</div>
				<div class="two fields">
					<div class="field">
						<label>Type</label>
						<select class="ui dropdown" id="contents" data-bind="contents">
							<option value="DOC">Documents</option>
							<option value="APX">Dutiable</option>
						</select>
					</div>
					<div class="field">
						<label>Value $</label>
						<input type="text" placeholder="Value" id="value" data-bind="value">
					</div>
				</div>
				<div class="two fields">
					<div class="field">
						<label>Weight</label>
						<input type="text" placeholder="Weight" id="weight" data-bind="weight">
					</div>
					<div class="field">
						<label>Weight Unit</label>
						<select class="ui dropdown" id="weight_qualifier" data-bind="weight_qualifier">
						  <option value="lbs">Pounds</option>
						  <option value="kgs">Kilograms</option>
						</select>
					</div>
				</div>
				<div class="two fields">
					<div class="field">
						<label>Pieces</label>
						<input type="text" placeholder="Pieces" id="pieces" data-bind="pieces">
					</div>
					<div class="field">
						<label>Packaging</label>
						<select class="ui dropdown" id="packaging" data-bind="packaging">
							<option value="P">Package</option>
							<option value="L">Letter</option>
							<option value="B">Box</option>
							<option value="O">Other</option>
						</select>
					</div>
				</div>
				<div class="two fields">
					<div class="field">
						<label>Service</label>
						<select class="ui dropdown" id="service" data-bind="service">
							<option value="ST">Standard Courier</option>
							<option value="GD">Ground</option>
							<option value="P1">Priority</option>
							<option value="DS">Deferred</option>
						</select>
					</div>
					<div class="field">
						<label>Payment</label>
						<select class="ui dropdown" id="bill_to" data-bind="bill_to">
							<option value="P">Pre Pay</option>
							<option value="C">Collect</option>
							<option value="F">Free Domicile</option>
						</select>
					</div>
				</div>
				<div class="two fields">
					<div class="field">
						<label>Dimensions</label>
						<input type="text" placeholder="L x W x H" id="dimensions" data-bind="dimensions">
						<div data-bind="vol_weight"></div>
					</div>
					<div class="field" style="margin-top: 25px;">
						<button class="ui blue button">Create</button>
						<button class="ui red button">Reset</button>
					</div>
				</div>
				<div class="ui error message"></div>
			</div>
		</form>
			<div class="formmsg transition hidden"></div>
			</div>
			<div class="four wide column">
				<h4 class="ui dividing header">Resources</h4>
				<div class="ui list">
					<div class="item"><a href="https://www.ibcinc.com/tools/address" target="_blank">IBC US Address tools</a></div>
				</div>
			</div>
		</div>
	</div>

	<div class="ui vertical footer segment">
			<div class="ui text container">
				<h3 class="ui centered header">&#169; <span id="year"></span> Ochoanet.com - All rights reserved.</h3>
			</div>
	</div>

	<div class="ui modal" id="awbmodal">
	<div class="header"></div>
	<div class="content" id="awbcontent">
		<div class="ui grid">
			<div class="row">
			<div class="twelve wide column">
				<table>
					<tr>
						<td><img class="ui small image" id="main_logo" /></td>
						<td>
							<h2 class="ui header" id="company_header"></h2>
							<p><span id="address"></span>&nbsp;|&nbsp;<span id="website"></span></p>
							<p><span id="phone"></span></p>
						</td>
					</tr>
				</table>
			</div>
			<div class="four wide column">
				<img class="ui image" id="barcode_image">
				<p data-bind="tracking" style="margin-left: 35px;"></p>
			</div>
			</div>

			<div class="row">
				<div class="ten wide column">
				<h3 class="ui dividing header">Shipper Information</h3>
				<div class="row">
					<table>
						<tr>
							<td>Account: <span data-bind="ship_account"></span></td>
							<td>Reference: <span data-bind="ship_reference"></span></td>
						</tr>
						<tr>
							<td data-bind="ship_name"></td>
							<td data-bind="ship_company_name"></td>
						</tr>
						<tr>
							<td data-bind="ship_address">
						</tr>
						<tr>
							<td><span data-bind="ship_city"></span>
							<span data-bind="ship_state"></span>
							<span data-bind="ship_zip"></span></td>
						</tr>
						<tr>
							<td><span data-bind="ship_country"></span> - <span data-bind="ship_country_name"></span></td>
							<td data-bind="ship_phone"></td>
						</tr>
					</table>
				</div>
				<div class="ui divider"></div>
				<div class="row">
					<h3 class="ui dividing header">Consignee Information</h3>
					<table>
						<tr>
							<td data-bind="con_name"></td>
							<td data-bind="con_company_name"></td>
						</tr>
						<tr>
							<td data-bind="con_address">
						</tr>
						<tr>
							<td><span data-bind="con_city"></span>
							<span data-bind="con_state"></span>
							<span data-bind="con_zip"></span></td>
						</tr>
						<tr>
							<td><span class="ui header" data-bind="con_country"></span> - <span data-bind="con_country_name"></span></td>
							<td data-bind="con_phone"></td>
						</tr>
						<tr>
							<td data-bind="con_email"></td>
						</tr>
					</table>
					<div>
						<p>Created: <span id="created_dt"></span></p>
					</div>
				</div>

				</div>
			  <div class="six wide column">
					<table>
						<tr>
							<td>Track: </td>
							<td data-bind="tracking"></td>
						</tr>
						<tr>
							<td>Contents: </td>
							<td data-bind="contents"></td>
						</tr>
						<tr>
							<td>Pieces: </td>
							<td data-bind="pieces"></td>
						</tr>
						<tr>
							<td>Weight: </td>
							<td data-bind="weight"></td>
						</tr>
						<tr>
							<td>Value $ </td>
							<td data-bind="value"></td>
						</tr>
						<tr>
							<td>Service: </td>
							<td data-bind="service"></td>
						</tr>
						<tr>
							<td>Packaging: </td>
							<td data-bind="packaging"></td>
						</tr>
						<tr>
							<td>Payment: </td>
							<td data-bind="bill_to"></td>
						</tr>
						<tr>
							<td>Dimensions: </td>
							<td data-bind="dimensions"></td>
						</tr>
						<tr>
							<td>Vol. Weight: </td>
							<td data-bind="vol_weight"></td>
						</tr>
						<tr>
							<td>Description: </td>
						</tr>
						<tr>
							<td colspan="2" data-bind="description"></td>
						</tr>
					</table>

				</div>
			</div>
		</div>
	</div>
	<div class="actions">
		<div class="ui approve button">Print</div>
		<div class="ui cancel button">Close</div>
	</div>
	</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
<script src="https://cdn.rawgit.com/tiaanduplessis/jquery-bindings/master/jquery-bindings.min.js"></script>
<script>
var app={
	id:"1582259620409687162",
	logo: 	"data:image/png;base64,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",
	address: "8801 West Chester Drive, Homestead FL 33035",
	website: "http://www.ochoanet.com",
	company_header: "Ochoanet.com",
	company_phone: "305-555-5555",
	input: $.bindings({
			"ship_name":"",
			"ship_company_name":"",
			"ship_phone":"",
			"ship_address":"",
			"ship_city":"",
			"ship_state":"",
			"ship_zip":"",
			"ship_country":"",
			"ship_country_name":"",
			"ship_account":"",
			"ship_reference":"",
			"con_name":"",
			"con_company_name":"",
			"con_phone":"",
			"con_address":"",
			"con_city":"",
			"con_state":"",
			"con_zip":"",
			"con_country":"",
			"con_country_name":"",
			"con_email":"",
			"con_tax_id":"",
			"weight":"",
			"value":"",
			"description":"",
			"pieces":"",
			"dimensions":"",
			"contents":"",
			"packaging":"",
			"weight_qualifier":"",
			"service":"",
			"bill_to":"",
			"dimensions_qualifier": "",
			"tracking":"",
			"vol_weight":"",
			"barcode_data":""
	}),
	zip_countries: [ 'US', 'CA' ]
};
function setDefaults(){
	app.input.contents = "DOC";
	app.input.packaging = "P";
	app.input.weight_qualifier = "lbs";
	app.input.service = "ST";
	app.input.bill_to = "P";
	app.input.dimensions_qualifier = "inch";
}
function reset(){
	const keys = Object.keys( app.input );
	for (var property in app.input) {
	  if( app.input.hasOwnProperty( property ) ) {
			app.input[ property ] = "";
	  }
	}
  setDefaults();
	$( '.ui.form' ).form( 'reset' );
}
function calculateVolumetricWeight(){
	var input = app.input.dimensions;
	if( input.match( /\d{1,} *x *\d{1,} *x *\d{1,}/i ) != null ){
		var values = input.toLowerCase().split( "x" );
		if( values.length === 3 ){
			var inch_table = [139, 139]; //int - domestic
			var cm_table = [5000, 5000]; //int - domestic
			var is_domestic = app.input.con_country === "US" ? true : false;
			var index = is_domestic ? 1 : 0;
			var divisor = app.input.dimensions_qualifier === "cm" ? cm_table[ index ] : inch_table[ index ];
			var msr = app.input.dimensions_qualifier === "cm" ? "Kgs." : "Lbs.";

			var calc_val = Math.ceil( ( values[ 0 ] * values[ 1 ] * values[ 2 ] / divisor ).toFixed(2) );
			app.input.vol_weight = calc_val + " "+ msr;
		}
	}
}
function toServiceJSON(){
	var billData = {
		"shipper": {
			"name": app.input.ship_name,
			"company_name": app.input.ship_company_name,
			"phone": app.input.ship_phone,
			"address": app.input.ship_address,
			"city": app.input.ship_city,
			"state": app.input.ship_state,
			"zip": app.input.ship_zip,
			"country": app.input.ship_country,
			"account": app.input.ship_account
		 },
		"consignee": {
			"name": app.input.con_name,
			"company_name": app.input.con_company_name,
			"phone": app.input.con_phone,
			"address": app.input.con_address,
			"city": app.input.con_city,
			"state": app.input.con_state,
			"zip": app.input.con_zip,
			"country": app.input.con_country,
			"email": "",
			"tax_id": ""
		},
		"shipment": {
			"contents": app.input.contents,
			"description": app.input.description,
			"pieces": app.input.pieces,
			"packaging": app.input.packaging,
			"weight": app.input.weight,
			"weight_qualifier": app.input.weight_qualifier,
			"value": app.input.value,
			"service": app.input.service,
			"bill_to": app.input.bill_to,
			"platinum_service": "",
			"insurance_amount": "",
			"dimensions": app.input.dimmensions,
			"dimensions_qualifier": app.input.dimensions_qualifier,
			"tracking": ""
		}
	}
	return billData;

}
function setupFormValidations(){
	//custom
	$.fn.form.settings.rules.requires_stzip = function( value, input ) {
		var result = false;
		var v = input == 0 ? app.input.con_country : app.input.ship_country;
		if( app.zip_countries.includes( v ) ){
			if( '' === value.trim() ){
				result = true;
			}
		}
		return !result;
	};
	$.fn.form.settings.rules.dim_check = function( value ) {
		var result = false;
		if( '' !== value.trim() ){
			var regexp = /\d{1,} *x *\d{1,} *x *\d{1,}/i;
			var res = value.match( regexp );
			result = res == null;
		}
		return !result;
	};
	$.fn.form.settings.rules.value_check = function( value ) {
		var result = false;
		if( '' !== value.trim() ){
			var regexp = /^\d+\.?\d{0,2}$/;
			var res = value.match( regexp );
			if( res != null ){
				if( app.input.contents === 'DOC' ){
					result = value >= 2;
				}
			}else{
				result = true;
			}
		}else{
			result = true;
		}
		return !result;
	};

	$( '.ui.form' ).form({ on: 'blur', inline: true,
		fields: {
			ship_account: {
					identifier: 'ship_account',
        	rules: [{
          	type   : 'regExp[/^\\d{4}$/]',
          	prompt : 'Account must be 4 numeric digits'
          }]
      },
			ship_name: {
					identifier: 'ship_name',
					rules: [{
						type   : 'empty'
					}]
			},
			ship_address: {
					identifier: 'ship_address',
					rules: [{
						type   : 'empty'
					}]
			},
			ship_city: {
					identifier: 'ship_city',
					rules: [{
						type   : 'empty'
					}]
			},
			ship_state: {
				identifier: 'ship_state',
				rules: [{
					type  	: 'requires_stzip[1]',
					prompt  :	'A state name is required when shipping from this country'
				}]
			},
			ship_zip: {
				identifier: 'ship_zip',
				rules: [{
					type  	: 'requires_stzip[1]',
					prompt  :	'A postal code is required when shipping from this country'
				}]
			},
			ship_country: {
					identifier: 'ship_country',
					rules: [{
						type   : 'regExp[/^[a-zA-Z]{2}$/]',
						prompt : '{name} should be the ISO two letter country code'
					}]
			},
			con_name: {
					identifier: 'con_name',
					rules: [{
						type   : 'empty'
					}]
			},
			con_address: {
					identifier: 'con_address',
					rules: [{
						type   : 'empty'
					}]
			},
			con_city: {
					identifier: 'con_city',
					rules: [{
						type   : 'empty'
					}]
			},
			con_state: {
				identifier: 'con_state',
				rules: [{
					type  	: 'requires_stzip[0]',
					prompt  :	'A state name is required when shipping to this country'
				}]
			},
			con_zip: {
				identifier: 'con_zip',
				rules: [{
					type  	: 'requires_stzip[0]',
					prompt  :	'A postal code is required when shipping to this country'
				}]
			},
			con_country: {
					identifier: 'con_country',
					rules: [{
						type   : 'regExp[/^[a-zA-Z]{2}$/]',
						prompt : '{name} should be the ISO two letter country code'
					}]
			},
			description: {
					identifier: 'description',
					rules: [{
						type   : 'empty'
					}]
			},
			weight: {
					identifier: 'weight',
					rules: [{
						type   : 'number'
					}]
			},
			value: {
					identifier: 'value',
					rules: [{
						type   : 'value_check',
						prompt : 'Value for DOC should be 0 or 1, for APX use the valid decimal'
					}]
			},
			pieces: {
					identifier: 'pieces',
					rules: [{
						type   : 'integer'
					}]
			},
			dimensions: {
					identifier: 'dimensions',
					rules: [{
						type   : 'dim_check',
						prompt : 'Please ensure the input matches L x W x H'
					}]
			}
    }
  });
}
function getDateString(){
	var d = new Date();
	return d.toDateString()+" "+fnum( d.getHours() )+":"+ fnum( d.getMinutes() );
}
function fnum( input ){
        return ( "0" + input ).slice( -2 );
}
function printAirwaybills( id, count ){
	var mywindow = window.open('', 'airbill div', 'height=400,width=600');
	mywindow.document.write('<html><head><title>Airwaybill</title><link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet"><style>html{ font-size: .7rem; }.important.text { font-size: 1.1rem; font-weight: bold;}.veryimportant.text { font-size: 1.6rem; font-weight: bold;}@media all {.page-break{ display: none; } }@media print {.page-break{ display: block; page-break-before: always; }}</style></head><body onload="window.print()">');
	var crnt = 0;
	for( var i = 0; i < count; i++){
		crnt = i +1;
		mywindow.document.write("<h1 class='ui centered header'>"+crnt + " of " + count +"</h1>");
		mywindow.document.write( $( id ).html() );
		mywindow.document.write( "<div class='page-break'></div>" );
	}
	mywindow.document.write('</body></html>');
	mywindow.document.close(); // necessary for IE >= 10
	mywindow.focus(); // necessary for IE >= 10
	setTimeout(function(){mywindow.close();}, 2000);
}
function setCountryCodeSelect(){
	//Country code selects..
	$.getJSON( "https://cdn2.hubspot.net/hubfs/518742/compose/db/country-code.json", function( data ) {
		$( ".country_search" ).each(function(){
			var dd = $(this);
			var selector = $( this ).find( ".menu" );
	 		$.each( data, function( key ) {
				var country = data[ key ];
	 			selector.append(
					$( "<div/>", { class: "item", "data-value": country.Code } ).append( $("<i/>",{ class: country.Code.toLowerCase()+" flag" }) ).append( country.Name )
	 			);
			});

			$(this).dropdown({ clearable: true, action: 'activate',  //Do the default and also run my custom.
				onChange: function(value, text, $selectedItem){
					if( value !== "" ){
						app.input[ dd.attr( "binds" ) ] = text;
					}
				}
			});
		});
	});
}
function generateBarcodeData( trk ){
	var url = "https://api.pactrak.com/barcode/servlet/BCGenerator?data_url=t&width=1&billNum=";
	var rurl = url+trk;

	return new Promise( function( resolve, reject ){

	        $.get( rurl, function( data ) {
	                resolve( data );
	        }).fail(function( xhr, status, error ) {
	                var d = JSON.stringify( xhr );
	                //console.log( d );
	                reject( d );
	        }).always(function() {
	                console.log( "Barcode Generated." );
	        });
	});
}
function showError( msg, err ){
	console.log( msg );
	console.log( err );
	$( ".formmsg" ).html( msg+"<br/>"+ err.message + "<br/>" + err.developerMessage.replace( "\n", "<br/>") );
	if( !$(".formmsg").hasClass( "visible" ) ){
		$( ".formmsg" ).addClass( "ui error message" ).transition( "scale" );
	}
}
function init(){
	$( "#year" ).text( new Date().getFullYear() );
	$( ".header.company" ).html( app.company_header );
	setDefaults();
	setCountryCodeSelect();
	$( "#tag" ).text( app.id );
	$( ".blue.button" ).click( function( e ){
		e.preventDefault();
		$( '.ui.form' ).form( 'validate form' );
		if( $( '.ui.form' ).form('is valid')) {

			$.ajax({
				type: "POST",
				url: "https://api.pactrak.com/ibcairbill/production",
				data: JSON.stringify( toServiceJSON() ),
				contentType: "application/json; charset=utf-8",
				dataType: "json"
			}).done(function(data){
				console.log( data );
				app.input.tracking = data.trackingNumber;
				generateBarcodeData( data.trackingNumber ).then( function( data ){
					app.input.barcode_data = data;
					$( "#barcode_image" ).attr( "src" , app.input.barcode_data );
					$( ".modal" ).modal( 'show' );
				}).catch(function( e ){
					showError( "Issue generating your track number", e );
				});
			}).fail(function(x, t, e) {
				console.log( x );
				showError( "There was an issue generating your Airwaybill", x.responseJSON );
  		}).always(function() {
    		console.log( "Airwaybill cycle completed" );
  		});
		}else{
			$( ".error.message" ).html( "Your form entry is not complete" );
		}

	});
	//Textfield blur
	$( "#dimensions" ).blur(function() {
		calculateVolumetricWeight();
	});

	$( ".red.button" ).click( function( e ){
		e.preventDefault();
		reset();
		$( ".error.message" ).empty();
		if( $(".formmsg").hasClass( "visible" ) ){
			$( ".formmsg" ).transition( "scale", 500, function(){
				$(this).removeClass( "ui error message" ).empty();
			});
		}
	});
	setupFormValidations();
	$( ".modal" ).modal({
    closable: false,
		onShow: function(){
			$( "#main_logo" ).attr( "src", app.logo );
			$( "#address" ).html( app.address );
			$( "#website" ).html( app.website );
			$( "#phone" ).html( app.company_phone );
			$( "#company_header" ).html( app.company_header );
			$( "#created_dt" ).html( getDateString() );
			$( "#awbmodal > .header" ).html( "Track Number " + app.input.tracking );
		},
    onDeny: function(){
			$( ".red.button" ).click();
    },
    onApprove: function() {
      printAirwaybills( "#awbcontent", app.input.pieces );
			return false;
    }
  });
}
$(function(){
	init();
});
</script>
</body>

</html>
